<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Archive - Lorenzo Hess</title>
    <style>
        :root { --main-color: #141414; }

        html, body {
            margin: 0; padding: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
            background-color: var(--main-color);
        }

        /* SIDEBAR FISSA */
        .ui-controls {
            position: fixed; top: 0; left: 0;
            width: 250px; height: 100vh;
            background-color: white;
            padding: 30px; box-sizing: border-box;
            color: black; z-index: 100;
            box-shadow: 2px 0 15px rgba(0, 0, 0, 0.1);
            font-size: 1.5rem;
        }

        .ui-controls a {
            color: black; text-decoration: none;
            display: block; margin-bottom: 30px;
            font-weight: normal;
            transition: 0.3s;
        }

        .ui-controls a:hover { padding-left: 10px; color: var(--main-color); }

        .sidebar-title {
            font-size: 3rem; font-weight: bold;
            line-height: 1; margin-top: 50px;
            letter-spacing: -1px;
        }

        #canvas-container {
            position: absolute;
            top: 0; left: 250px;
            width: calc(100vw - 250px);
            height: 100vh;
        }

        /* BOLLA */
        .bubble-wrapper {
            position: absolute;
            display: flex;
            align-items: center;
            z-index: 10;
            cursor: pointer;
            height: 120px;
            will-change: transform;
        }

        .circle {
            width: 120px; height: 120px;
            background-color: white;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
            z-index: 2;
            flex-shrink: 0;
        }

        /* Effetto hover solo visivo, non fisico */
        .bubble-wrapper:hover .circle { transform: scale(1.1); }

        .circle img { width: 55%; height: auto; pointer-events: none; }

        /* PANNELLO INFORMATIVO RETTANGOLARE */
        .info-panel {
            background-color: white;
            color: black;
            margin-left: -60px;
            padding-left: 80px;
            padding-right: 0;
            border-radius: 0;
            height: 120px;
            max-width: 0;
            overflow: hidden;
            white-space: nowrap;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            z-index: 1;
        }

        .bubble-wrapper.active .info-panel {
            max-width: 600px;
            opacity: 1;
            padding-right: 40px;
        }

        .info-title {
            font-size: 1.5rem;
            font-weight: bold;
            text-transform: uppercase;
            margin-bottom: 3px;
            transform: translateX(-20px);
            transition: transform 0.5s ease 0.2s;
        }

        .bubble-wrapper.active .info-title { transform: translateX(0); }

        .info-data {
            font-size: 0.95rem;
            line-height: 1.3;
            opacity: 0;
            transition: opacity 0.5s ease 0.4s;
        }

        .bubble-wrapper.active .info-data { opacity: 0.8; }

        .color-code {
            position: fixed; bottom: 20px; right: 20px;
            color: rgba(255, 255, 255, 0.4);
            font-family: monospace; font-size: 1.2rem; z-index: 50;
        }
    </style>
</head>
<body>

    <div class="ui-controls">
        <a href="../index.html">← Go back</a>
        <div class="sidebar-title">Data<br>Archive</div>
    </div>

    <div id="canvas-container">
        <div class="bubble-wrapper" id="bubble-hardware">
            <div class="circle"><img src="https://upload.wikimedia.org/wikipedia/commons/a/ad/HP_logo_2012.svg" alt="HP"></div>
            <div class="info-panel">
                <div class="info-title">Spectre x360 13"</div>
                <div class="info-data">OLED Touch 3K2K • 3:2 Ratio<br>16GB RAM • 1TB SSD • 1.36kg</div>
            </div>
        </div>

        <div class="bubble-wrapper" id="bubble-spotify">
            <div class="circle"><img src="https://upload.wikimedia.org/wikipedia/commons/1/19/Spotify_logo_without_text.svg" alt="Spotify"></div>
            <div class="info-panel">
                <div class="info-title">Spotify Rhythm</div>
                <div class="info-data">Top Artist: Arctic Monkeys<br>Mood: Indie Rock • 12.4k min</div>
            </div>
        </div>

        <div class="bubble-wrapper" id="bubble-focus">
            <div class="circle"><img src="https://upload.wikimedia.org/wikipedia/commons/9/9a/Visual_Studio_Code_1.35_icon.svg" alt="Focus"></div>
            <div class="info-panel">
                <div class="info-title">Daily Focus</div>
                <div class="info-data">Main App: VS Code (6h 12m)<br>Uptime: 4 Days • 24 Open Tabs</div>
            </div>
        </div>
    </div>

    <div id="color-code" class="color-code"></div>

    <script>
        // --- 1. SETUP ESTETICO ---
        const hexChars = '0123456789ABCDEF';
        function getRandomColor() {
            let color = '#';
            for (let i = 0; i < 6; i++) color += hexChars[Math.floor(Math.random() * 16)];
            return color;
        }
        const currentHex = getRandomColor();
        document.documentElement.style.setProperty('--main-color', currentHex);
        document.getElementById('color-code').innerText = currentHex;

        // --- 2. MOTORE FISICO AUTONOMO ---
        const container = document.getElementById('canvas-container');
        const bubbles = document.querySelectorAll('.bubble-wrapper');
        
        let bubbleData = Array.from(bubbles).map(b => ({
            el: b,
            x: Math.random() * (container.clientWidth - 200),
            y: Math.random() * (container.clientHeight - 200),
            vx: (Math.random() - 0.5) * 1.5,
            vy: (Math.random() - 0.5) * 1.5
        }));

        function animate() {
            const cw = container.clientWidth;
            const ch = container.clientHeight;

            bubbleData.forEach((b, i) => {
                // Il movimento avviene solo se la bolla non è attiva (aperta)
                if (!b.el.classList.contains('active')) {
                    
                    b.x += b.vx;
                    b.y += b.vy;

                    // Rimbalzo bordi
                    if (b.x <= 0) { b.x = 0; b.vx = Math.abs(b.vx); }
                    if (b.x + 120 >= cw) { b.x = cw - 120; b.vx = -Math.abs(b.vx); }
                    if (b.y <= 0) { b.y = 0; b.vy = Math.abs(b.vy); }
                    if (b.y + 120 >= ch) { b.y = ch - 120; b.vy = -Math.abs(b.vy); }

                    // Collisioni tra bolle
                    for (let j = i + 1; j < bubbleData.length; j++) {
                        let b2 = bubbleData[j];
                        let dx = (b.x + 60) - (b2.x + 60);
                        let dy = (b.y + 60) - (b2.y + 60);
                        let distance = Math.sqrt(dx * dx + dy * dy);

                        if (distance < 120) {
                            // Scambio semplice di vettori (rimbalzo elastico)
                            let tempVx = b.vx; let tempVy = b.vy;
                            b.vx = b2.vx; b.vy = b2.vy;
                            b2.vx = tempVx; b2.vy = tempVy;
                            
                            // Risoluzione minima sovrapposizione
                            let overlap = 120 - distance;
                            let nx = dx / distance; let ny = dy / distance;
                            b.x += nx * overlap / 2; b.y += ny * overlap / 2;
                            b2.x -= nx * overlap / 2; b2.y -= ny * overlap / 2;
                        }
                    }
                }
                b.el.style.transform = `translate(${b.x}px, ${b.y}px)`;
            });
            requestAnimationFrame(animate);
        }

        // --- 3. GESTIONE CLIC ---
        bubbles.forEach(b => {
            b.addEventListener('click', () => {
                const isActive = b.classList.contains('active');
                bubbles.forEach(other => other.classList.remove('active'));
                if (!isActive) b.classList.add('active');
            });
        });

        animate();
    </script>
</body>
</html>